$(document).ready(function(){$("#telefone").mask("(99) 9999-99999");function s(e){var t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)}$("#email").on("blur",function(){var e=$(this).val();s(e)||swal.fire({icon:"warning",title:"O e-mail digitado é inválido",text:"digite um e-mail válido contento '@' e o provedor"})}),$("#emailEdit").on("blur",function(){var e=$(this).val();s(e)||swal.fire({icon:"warning",title:"O e-mail digitado é inválido",text:"digite um e-mail válido contento '@' e o provedor"})}),$("#nome").on("blur",function(){var e=$(this).val(),t=/^[A-Za-z]{6,}$/;t.test(e)||(swal.fire({icon:"warning",type:"error",title:"Nome Inválido",text:"O nome deve ter mais de 5 caracteres e não pode conter números."}),$("#nome").val(""))}),$("#listar_pessoas_conta").on("click",".deletePerson",function(e){e.preventDefault();var t=$(this).closest("tr").find("td:eq(0)").text(),a=$(this).closest("tr").find("td:eq(1)").text();swal.fire({icon:"warning",title:"Deseja excluir os dados da pessoa "+a+" do Sistema? ",allowOutsideClick:!1,showCancelButton:!0,cancelButtonText:"NÃO",cancelButtonColor:"#ed5048",confirmButtonText:"SIM",confirmButtonColor:"#33733f"}).then(o=>{o.value&&(swal.fire({icon:"info",title:"Localizando Pessoa",text:"Aguarde o final da operação, isto pode demorar um pouco!",allowOutsideClick:!1}),swal.showLoading(),$.ajax({url:"/deletePerson",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"POST",data:{id:t},dataType:"json",success:function(i){i.resultado=="OK"?(swal.fire({icon:"success",title:"Pessoa Removida",text:"Pessoa Removida do sistema com sucesso."}),window.location.reload()):i.resultado=="ERRO"&&swal.fire({icon:"warning",title:"ERRO NA REQUISIÇÃO!",text:i.text})},error:function(i){swal.fire({icon:"warning",title:"ERRO NA REQUISIÇÃO!",text:i.text})}}))})}),$("#Button_new_person").on("click",function(e){e.preventDefault();var t={},a=0;if($.each($("#form_new_person").serializeArray(),function(o,i){t[i.name]=i.value,i.value!=""&&a++}),console.log(a),a<3)return swal.fire({icon:"warning",title:"Exite Campo(s) vazio(s).",text:"Por favor, preencha Todos os campos"}),!1;swal.fire({icon:"info",title:"Processando requisição",text:"Aguarde o final da operação, isto pode demorar um pouco!",allowOutsideClick:!1}),swal.showLoading(),$.ajax({url:"/CreatePessoas",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{data:t},type:"POST",dataType:"json",success:function(o){o.resultado=="OK"?(swal.fire({icon:"success",title:o.title,text:o.text}),location.reload()):(swal.fire({icon:"warning",type:"error",title:o.title,text:o.text}),console.log(o.error))},error:function(o){swal.fire({icon:"warning",title:"Erro",text:"Não foi possivel realizar esta operação, tente novamente.",allowOutsideClick:!0}),console.log(o)}})}),$("#btn_atualizar").on("click",function(e){e.preventDefault();var t={},a=0;$.each($("#form_new_person_atualizar").serializeArray(),function(n,r){t[r.name]=r.value,r.value!=""&&a++});var o=$("#nomeEdit").val(),i=/^[A-Za-z]{6,}$/;if(i.test(o)||swal.fire({icon:"warning",type:"error",title:"Nome Inválido",text:"O nome deve ter mais de 5 caracteres e não pode conter números."}),console.log(a),a<3)return swal.fire({icon:"warning",title:"Exite Campo(s) vazio(s).",text:"Por favor, preencha Todos os campos"}),!1;swal.fire({icon:"info",title:"Processando requisição",text:"Aguarde o final da operação, isto pode demorar um pouco!",allowOutsideClick:!1}),swal.showLoading(),$.ajax({url:"/UpdatePessoas",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{data:t},type:"POST",dataType:"json",success:function(n){n.resultado=="OK"?(swal.fire({icon:"success",title:n.title,text:n.text}),window.location.href="/listarPessoasDetalhada"):(swal.fire({icon:"warning",type:"error",title:n.title,text:n.text}),console.log(n.error))},error:function(n){swal.fire({icon:"warning",title:"Erro",text:"Não foi possivel realizar esta operação, tente novamente.",allowOutsideClick:!0}),console.log(n)}})})});
